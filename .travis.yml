language: minimal
dist: xenial

cache:
  directories:
  - $HOME/.cache/pip

env:
  - FINANCEAGER_BACKEND=v0.22 FINANCEAGER_FRONTEND=v0.21
  - FINANCEAGER_BACKEND=v0.21 FINANCEAGER_FRONTEND=v0.22

addons:
  apt:
    packages:
    - python3-venv

before_script:
  - echo backend frontend status > result.txt
  - ./prepare.sh

script:
  - echo $FINANCEAGER_BACKEND $FINANCEAGER_FRONTEND >> result.txt
  - ./run.sh && sed -i '$ s/$/ compatible/' result.txt

after_script:
  - cat result.txt

notifications:
    email:
        on_success: never
